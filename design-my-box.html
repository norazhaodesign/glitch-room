<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
<title>Glitch Rooms</title>
  
<link rel="stylesheet" type="text/css" href="css/styles.css">
<link rel="stylesheet" type="text/css" href="css/styles-class.css">
<script src="js/aframe.js"></script>
</head>

<body>
<!--main layout-->
<main class="desktop2ColMobile1Col"> 
  <!--placeholder-->
  <div class="desktopOnly">
  </div>
  <!--controls--------------------------------------------------------->
  <div id="htmlContents"
       style="z-index: 1;
            position: relative;
            overflow: auto;
            height: 100vh;
            margin: 0 20px 0 10px;">
    <!--color-->
    <div>
      <h2>Select Colours</h2>
      <div style="display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                grid-gap: 7px;
                width: 100%;
                max-width: 400px;
                margin-top: 12px;">
        <div class="input-color-container">
          <input id="colorPicker1"
             type="color"
             value="#ff0000"
             class="input-color">
        </div>
        <div class="input-color-container">
          <input id="colorPicker2"
             type="color"
             value="#00ff00"
             class="input-color">
        </div>
        <div class="input-color-container">
          <input id="colorPicker3"
             type="color"
             value="#0000ff"
             class="input-color">
        </div>
      </div>
      <button id="genrateRandomColorSet"
            style="max-width: 400px;
                   margin-top: 12px;">Generate Random Colours</button>
    </div>
    
    <!--scale-->
    <div>
      <h2>Set Scale</h2>
      <label for="sliderScale">Scale:</label>
      <output id="displayScale">1</output>
      <input id="sliderScale"
           type="range"
           value="1"
           min="0.1"
           max="5"
           step="0.01"
           oninput="displayScale.value = sliderScale.value">
    </div>
    
    <!--shape-->
    <div>
      <h2>Change Shape</h2>
      <!--height-->
      <label for="sliderSize1">Height:</label>
      <output id="displaySize1">1</output>
      <input id="sliderSize1"
           type="range"
           value="1"
           min="0.1"
           max="5"
           step="0.01"
           oninput="displaySize1.value = sliderSize1.value">
      <br>
      <!--width-->
      <label for="sliderSize2">Width:</label>
      <output id="displaySize2">1</output>
      <input id="sliderSize2"
           type="range"
           value="1"
           min="0.1"
           max="5"
           step="0.01"
           oninput="displaySize2.value = sliderSize2.value">
      <br>
      <!--depth-->
      <label for="sliderSize3">Depth:</label>
      <output id="displaySize3">1</output>
      <input id="sliderSize3"
           type="range"
           value="1"
           min="0.1"
           max="5"
           step="0.01"
           oninput="displaySize3.value = sliderSize3.value">
    </div>
    
    <!--movement-->
    <div>
      <h2>Adjust Movement</h2>
      <!--speed-->
      <label for="sliderSpeed">Speed:</label>
      <output id="displaySpeed">1</output>
      <input id="sliderSpeed"
           type="range"
           value="1"
           min="0.1"
           max="5"
           step="0.01"
           oninput="displaySpeed.value = sliderSpeed.value">
    </div>
    
    <!--enter vr button--> 
    <a id="myEnterVRButton" href="#">
    <button style="margin-top: 30px;
                   max-width: 400px;">Enter VR</button>
    </a>
    <div style="height: 125px;">
    </div>
  </div>
</main>
  
  
  
  

<!--aframe--------------------------------------------------------->
<a-scene vr-mode-ui="enterVRButton: #myEnterVRButton">
  <a-entity id="outsideCamera" 
            camera="active: true"
            look-controls="false"
            position="-10 0 30"></a-entity>
  <a-entity id="vrCamera" 
            camera="active: false"
            look-controls
            position="0 0 0"></a-entity>
  
  <a-box id="object1"
         position="0 0 0"
         height="20"
         width="20"
         depth="20"
         side="double"
         material="color: #ff0000"
         animation__rotation="property: rotation;
                              from: 0 360 0;
                              to: 0 0 360;
                              dir: reverse;
                              dur: 20000;
                              loop: true;
                              easing: linear;"> </a-box>
  <a-box id="object2"
         position="0 0 0"
         height="20"
         width="20"
         depth="20"
         side="double"
         material="color: #00ff00"
         animation__rotation="property: rotation;
                              from: 0 359.99 0;
                              to: 0 0 359.99;
                              dir: reverse;
                              dur: 20000;
                              loop: true;
                              easing: linear;"> </a-box>
  <a-box id="object3"
         position="0 0 0"
         height="20"
         width="20"
         depth="20"
         side="double"
         material="color: #0000ff"
         animation__rotation="property: rotation;
                              from: -0.001 360 0;
                              to: -0.001 0 360;
                              dir: reverse;
                              dur: 20000;
                              loop: true;
                              easing: linear;"> </a-box>
</a-scene>
  
  
  

<!--javascript---------------------------------------------------------> 
<script type="text/javascript">
// change active camera when entering and exit vr
document.querySelector('a-scene').addEventListener('enter-vr', () => {
  vrCamera.setAttribute('camera', 'active', true);
  outsideCamera.setAttribute('camera', 'active', false);
  document.body.classList.add('in-vr');
}, false);
document.querySelector('a-scene').addEventListener('exit-vr', () => {
  outsideCamera.setAttribute('camera', 'active', true);
  vrCamera.setAttribute('camera', 'active', false);
  document.body.classList.remove('in-vr');
}, false);

// use color picker input to change object color
colorPicker1.addEventListener('input', () => {
  object1.setAttribute('material', {color: event.target.value});
  console.log(colorPicker1.value)
}, false);
colorPicker2.addEventListener('input', () => {
  object2.setAttribute('material', {color: event.target.value});
}, false);
colorPicker3.addEventListener('input', () => {
  object3.setAttribute('material', {color: event.target.value});
}, false);

// press button to apply random colors on the object
genrateRandomColorSet.addEventListener('click', () => {
  var color1 = '#'+'0123456789abcdef'.split('').map(function(v,i,a){
  return i>5 ? null : a[Math.floor(Math.random()*16)] }).join(''); // generate random hex color
  // or this but sometimes generate less digits = '#' + Math.floor(Math.random() * 0xffffff).toString(16)
  object1.setAttribute('material', {color: color1}); // apply color on object
  colorPicker1.value = color1; // change color picker value

  var color2 = '#'+'0123456789abcdef'.split('').map(function(v,i,a){
  return i>5 ? null : a[Math.floor(Math.random()*16)] }).join('');
  object2.setAttribute('material', {color: color2});
  colorPicker2.value = color2;

  var color3 = '#'+'0123456789abcdef'.split('').map(function(v,i,a){
  return i>5 ? null : a[Math.floor(Math.random()*16)] }).join('');
  object3.setAttribute('material', {color: color3});
  colorPicker3.value = color3;

  console.log(color1, color2, color3);
  console.log(colorPicker1.value, colorPicker2.value, colorPicker3.value);
}, false);

// use silder to change object size
sliderScale.addEventListener('input', () => {
  object1.setAttribute('scale', {x: sliderScale.value,
                                 y: sliderScale.value,
                                 z: sliderScale.value});
  object2.setAttribute('scale', {x: sliderScale.value,
                                 y: sliderScale.value,
                                 z: sliderScale.value});
  object3.setAttribute('scale', {x: sliderScale.value,
                                 y: sliderScale.value,
                                 z: sliderScale.value});
}, false);

sliderSize1.addEventListener('input', () => {
  object1.setAttribute('height', sliderSize1.value * 20);
  object2.setAttribute('height', sliderSize1.value * 20);
  object3.setAttribute('height', sliderSize1.value * 20);
}, false);

sliderSize2.addEventListener('input', () => {
  object1.setAttribute('width', sliderSize2.value * 20);
  object2.setAttribute('width', sliderSize2.value * 20);
  object3.setAttribute('width', sliderSize2.value * 20);
}, false);

sliderSize3.addEventListener('input', () => {
  object1.setAttribute('depth', sliderSize3.value * 20);
  object2.setAttribute('depth', sliderSize3.value * 20);
  object3.setAttribute('depth', sliderSize3.value * 20);
}, false);

// use silder to change movement speed
sliderSpeed.addEventListener('input', () => {
  object1.setAttribute('animation__rotation', {dur: 20000 / sliderSpeed.value});
  object2.setAttribute('animation__rotation', {dur: 20000 / sliderSpeed.value});
  object3.setAttribute('animation__rotation', {dur: 20000 / sliderSpeed.value});
}, false);






</script>
</body>
</html>
