<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Glitch Room</title>
<link rel="stylesheet" type="text/css" href="../css/styles.css">
<link rel="stylesheet" type="text/css" href="../css/styles-class.css">
<script src="../js/aframe.min.js"></script>
</head>

<body>
<!--controls------------------------------------------------------------------------------------------------------------------>
<!--main layout-->
<main class="desktop2ColMobile1Col">

  <!--placeholder-->
  <div class="hideOnMobile">
  </div>

  <!--main column-->
  <div id="htmlContents"
       style="z-index: 1;
              position: relative;
              overflow: auto;
              height: 100vh;
              margin: 0 20px 0 10px;">
    <!--top buttons-->
    <div style="max-width: 400px;
                display: grid;
                grid-template-columns: 50px 80px auto;
                grid-gap: 6px;
                margin-top: 15px;">
      <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! change link number !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
      <a style="display:inline-block;"
         href="1-vr.html">
      <button style="width: 50px;">&lt;&lt;</button>
      </a>
      <a style="display:inline-block;"
         href="../index.html">
      <button style="width: 80px;">Home</button>
      </a>
      <a id="myEnterVRButton"
         style="display:inline-block;"
         href="#">
      <button>Enter VR</button>
      </a>
    </div>

    <!--color-->
    <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! change color hex !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
    <h2 style="margin-top: 20px;">Select Colours</h2>
    <div class="color-picker-div">
      <div class="input-color-container">
        <input id="colorPicker1"
                 type="color"
                 value="#199c57"
                 class="input-color">
      </div>
      <div class="input-color-container">
        <input id="colorPicker2"
                 type="color"
                 value="#e55235"
                 class="input-color">
      </div>
      <div class="input-color-container">
        <input id="colorPicker3"
                 type="color"
                 value="#1539ed"
                 class="input-color">
      </div>
    </div>
    <button id="genrateRandomColorSet"
              style="max-width: 400px;
                     margin-top: 12px;">Generate Random Colours</button>

    <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! replace from here !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
    <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! change all following values to match display !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
    <!--scale-->
    <h2>Set Scale</h2>
    <label for="sliderScale">Scale:</label>
    <output id="displayScale">1.8</output>
    <input id="sliderScale" type="range" value="1.8" min="0.1" max="5" step="0.01" oninput="displayScale.value = sliderScale.value">

    <h2>Change Shape</h2>
    <!--height-->
    <label for="sliderSizeHeight">Height:</label>
    <output id="displaySizeHeight">13</output>
    <input id="sliderSizeHeight" type="range" value="13" min="1" max="100" step="1" oninput="displaySizeHeight.value = sliderSizeHeight.value">
    <br>

    <!--radius top-->
    <label for="sliderRadiusTop">Radius Top:</label>
    <output id="displayRadiusTop">8</output>
    <input id="sliderRadiusTop" type="range" value="8" min="0" max="60" step="1" oninput="displayRadiusTop.value = sliderRadiusTop.value">
    <br>

    <!--radius bottom-->
    <label for="sliderRadiusBottom">Radius Bottom:</label>
    <output id="displayRadiusBottom">8</output>
    <input id="sliderRadiusBottom" type="range" value="8" min="0" max="60" step="1" oninput="displayRadiusBottom.value = sliderRadiusBottom.value">

    <!--segments height-->
    <h2>Change Segments</h2>
    <label for="sliderSegmentHeight">Segments Height:</label>
    <output id="displaySegmentsHeight">50</output>
    <input id="sliderSegmentHeight" type="range" value="50" min="1" max="50" step="1" oninput="displaySegmentsHeight.value = sliderSegmentHeight.value">
    <br>
    <!--segments radial-->
    <label for="sliderSegmentRadial">Segments Radial:</label>
    <output id="displaySegmentsRadial">5</output>
    <input id="sliderSegmentRadial" type="range" value="5" min="3" max="100" step="1" oninput="displaySegmentsRadial.value = sliderSegmentRadial.value">

    <!--speed-->
    <h2>Adjust Movement</h2>
    <label for="sliderSpeed">Speed:</label>
    <output id="displaySpeed">0.7</output>
    <input id="sliderSpeed" type="range" value="0.7" min="0.1" max="5" step="10" oninput="displaySpeed.value = sliderSpeed.value">

    <!--enter vr button-->
    <a id="myEnterVRButton2" href="#">
    <button style="margin-top: 30px;
                   max-width: 400px;">Enter VR</button>
    </a>
    <div style="height: 125px;">
    </div>
  </div>
</main>

<!--aframe------------------------------------------------------------------------------------------------------------------>
<a-scene vr-mode-ui="enterVRButton: #myEnterVRButton">
  <a-sky color="#000000">
  </a-sky>
  <a-entity id="normalCamera"
            camera
            position="-10 0 30">
  </a-entity>
  <a-camera id="vrCamera"
            position="0 0 0"
            active="false">
  </a-camera>
  <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! replace from here !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
  <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! and change colors !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
  <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! and calculate animation duration !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
  <a-cone id="object1"
          wireframe="false"
          position="0 0 0"
          radius-bottom="8"
          radius-top="8"
          height="13"
          segments-radial="5"
          segments-height="50"
          open-ended="false"
          theta-length="360"
          theta-start="0"
          side="double"
          material="color: #199c57"
          animation="property: rotation;
                     from: 0 0 0;
                     to: 360 360 360;
                     dir: reverse;
                     dur: 71428;
                     loop: true;
                     easing: linear;"
          geometry=""
          scale="1.8 1.8 1.8">
  </a-cone>
  <a-cone id="object2"
          visible="true"
          position="0 0 0"
          radius-bottom="8"
          radius-top="8"
          height="13"
          segments-radial="5"
          segments-height="50"
          open-ended="false"
          theta-length="360"
          theta-start="0"
          side="double"
          material="color: #e55235"
          animation="property: rotation;
                     from: 0 0 -0.002;
                     to: 360 360 359.998;
                     dir: reverse;
                     dur: 71428;
                     loop: true;
                     easing: linear;"
          geometry=""
          scale="1.8 1.8 1.8">
  </a-cone>
  <a-cone id="object3"
          visible="true"
          position="0 0 0"
          radius-bottom="8"
          radius-top="8"
          height="13"
          segments-radial="5"
          segments-height="50"
          open-ended="false"
          theta-length="360"
          theta-start="0"
          side="double"
          material="color: #1539ed"
          animation="property: rotation;
                     from: 0 0 -0.005;
                     to: 360 360 359.995;
                     dir: reverse;
                     dur: 71428;
                     loop: true;
                     easing: linear;"
          geometry=""
          scale="1.8 1.8 1.8">
  </a-cone>
</a-scene>

<!--javascript------------------------------------------------------------------------------------------------------------------>
<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! replace this whole part !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<script type="text/javascript">
// switch active camera
document.querySelector('a-scene').addEventListener('enter-vr', () => {
  vrCamera.setAttribute('camera', 'active', true);
  document.body.classList.add('in-vr');
}, false);
document.querySelector('a-scene').addEventListener('exit-vr', () => {
  normalCamera.setAttribute('camera', 'active', true);
  document.body.classList.remove('in-vr');
}, false);

// enter vr 2nd button
myEnterVRButton2.addEventListener('click', () => {
  myEnterVRButton.click();
}, false);

// color picker
colorPicker1.addEventListener('input', () => {
  object1.setAttribute('material', {color: event.target.value});
  console.log(colorPicker1.value)
}, false);
colorPicker2.addEventListener('input', () => {
  object2.setAttribute('material', {color: event.target.value});
}, false);
colorPicker3.addEventListener('input', () => {
  object3.setAttribute('material', {color: event.target.value});
}, false);

// generate random color set
genrateRandomColorSet.addEventListener('click', () => {
  var color1 = '#'+'0123456789abcdef'.split('').map(function(v,i,a){
  return i>5 ? null : a[Math.floor(Math.random()*16)] }).join(''); // generate random hex color
  object1.setAttribute('material', {color: color1}); // apply color on object
  colorPicker1.value = color1; // change color picker value

  var color2 = '#'+'0123456789abcdef'.split('').map(function(v,i,a){
  return i>5 ? null : a[Math.floor(Math.random()*16)] }).join('');
  object2.setAttribute('material', {color: color2});
  colorPicker2.value = color2;

  var color3 = '#'+'0123456789abcdef'.split('').map(function(v,i,a){
  return i>5 ? null : a[Math.floor(Math.random()*16)] }).join('');
  object3.setAttribute('material', {color: color3});
  colorPicker3.value = color3;

  console.log(color1, color2, color3);
  console.log(colorPicker1.value, colorPicker2.value, colorPicker3.value);
}, false);

// scale
sliderScale.addEventListener('input', () => {
  object1.setAttribute('scale', {x: sliderScale.value,
                                 y: sliderScale.value,
                                 z: sliderScale.value});
  object2.setAttribute('scale', {x: sliderScale.value,
                                 y: sliderScale.value,
                                 z: sliderScale.value});
  object3.setAttribute('scale', {x: sliderScale.value,
                                 y: sliderScale.value,
                                 z: sliderScale.value});
}, false);

// height
sliderSizeHeight.addEventListener('input', () => {
  object1.setAttribute('height', sliderSizeHeight.value);
  object2.setAttribute('height', sliderSizeHeight.value);
  object3.setAttribute('height', sliderSizeHeight.value);
}, false);

// radius top
sliderRadiusTop.addEventListener('input', () => {
  object1.setAttribute('radius-top', sliderRadiusTop.value);
  object2.setAttribute('radius-top', sliderRadiusTop.value);
  object3.setAttribute('radius-top', sliderRadiusTop.value);
}, false);

// radius bottom
sliderRadiusBottom.addEventListener('input', () => {
  object1.setAttribute('radius-bottom', sliderRadiusBottom.value);
  object2.setAttribute('radius-bottom', sliderRadiusBottom.value);
  object3.setAttribute('radius-bottom', sliderRadiusBottom.value);
}, false);

// segments height
sliderSegmentHeight.addEventListener('input', () => {
  object1.setAttribute('segments-height', sliderSegmentHeight.value);
  object2.setAttribute('segments-height', sliderSegmentHeight.value);
  object3.setAttribute('segments-height', sliderSegmentHeight.value);
}, false);

// segments radial
sliderSegmentRadial.addEventListener('input', () => {
  object1.setAttribute('segments-radial', sliderSegmentRadial.value);
  object2.setAttribute('segments-radial', sliderSegmentRadial.value);
  object3.setAttribute('segments-radial', sliderSegmentRadial.value);
}, false);

// speed
sliderSpeed.addEventListener('input', () => {
  object1.setAttribute('animation', {dur: 50000 / sliderSpeed.value});
  object2.setAttribute('animation', {dur: 50000 / sliderSpeed.value});
  object3.setAttribute('animation', {dur: 50000 / sliderSpeed.value});
}, false);
</script>
</body>
</html>
